---
title: "å­—ç¬¦é›†ä¸ç¼–ç "
date: 2023-06-18T14:05:25+08:00
tags: ["Java"]
categories: []
draft: false
toc: true
---
## æœ¯è¯­

> **å­—ç¬¦**(character)æ˜¯å…·æœ‰è¯­ä¹‰å€¼çš„æ–‡æœ¬çš„æœ€å°å•ä½ã€‚
> **å­—ç¬¦é›†**(character set)æ˜¯å¯èƒ½ç”±å¤šç§è¯­è¨€ä½¿ç”¨çš„å­—ç¬¦çš„é›†åˆã€‚ä¾‹ï¼šæ‹‰ä¸è¯­å­—ç¬¦é›†ç”±è‹±è¯­å’Œå¤§å¤šæ•°æ¬§æ´²è¯­è¨€ä½¿ç”¨ï¼Œä½†å¸Œè…Šè¯­å­—ç¬¦é›†ä»…ç”±å¸Œè…Šè¯­ä½¿ç”¨ã€‚
> **ç¼–ç å­—ç¬¦é›†**(coded character set)æ˜¯ä¸€ä¸ªå­—ç¬¦é›†ï¼Œå…¶ä¸­æ¯ä¸ªå­—ç¬¦å¯¹åº”äºä¸€ä¸ªå”¯ä¸€çš„æ•°å­—ã€‚
> ä¸€ä¸ªç¼–ç å­—ç¬¦é›†çš„**ç¼–ç ç‚¹**(code point)æ˜¯å­—ç¬¦é›†ä¸­æˆ–ç¼–ç ç©ºé—´ä¸­å…è®¸çš„ä»»ä½•å€¼ã€‚
> **ç¼–ç ç©ºé—´**(code space)æ˜¯ä¸€ä¸ªæ•´æ•°èŒƒå›´ï¼Œå…¶å€¼ä¸ºç¼–ç ç‚¹ã€‚
> **ç¼–ç å•å…ƒ**(code unit)æ˜¯ä¸€ä¸ªä½åºåˆ—ï¼Œç”¨äºåœ¨ç»™å®šçš„ç¼–ç è¡¨å•ä¸­å¯¹åº“çš„æ¯ä¸ªå­—ç¬¦è¿›è¡Œç¼–ç ã€‚æœ‰çš„æ–‡æ¡£ä¸­ç§°ä¹‹ä¸º**ç¼–ç å€¼**(code value)ã€‚



ç¼–ç å•å…ƒä¾‹å­ï¼šUS-ASCII: 7 bitsï¼ŒUTF-8, GB18030: 8 bitsï¼ŒUTF-16: 16 bitsï¼ŒUTF-32: 32 bits

å­—ç¬¦ä¸²`"abcğ€"` åŒ…æ‹¬4ä¸ªå­—ç¬¦ï¼Œ4ä¸ªç¼–ç ç‚¹ï¼š
	(1) UTF-32ç¼–ç æ—¶: 4ä¸ªç¼–ç å•å…ƒï¼Œ00000061, 00000062, 00000063, 00010400
	(2) UTF-16ç¼–ç æ—¶: 5ä¸ªç¼–ç å•å…ƒï¼Œ0061, 0062, 0063, d801, dc00
	(3) UTF-8ç¼–ç æ—¶: 7ä¸ªç¼–ç å•å…ƒï¼Œ61, 62, 63, f0, 90, 90, 80

![](https://cdn.jsdelivr.net/gh/devin0x01/myimages@master/githubpages/image_bbc1f7f685c0d771366f94dbec972ec4.png)

## ç¼–ç æ ¼å¼åŒºåˆ«

Unicodeã€GB2312éƒ½æ˜¯**ç¼–ç å­—ç¬¦é›†**ï¼Œå³ä¸€ä¸ªç¼–å·ï¼ˆæ•°å­—ï¼‰åˆ°å­—ç¬¦çš„ä¸€ç§æ˜ å°„å…³ç³»ï¼Œä»…ä»…æ˜¯ä¸€ç§æ˜ å°„å…³ç³»ã€‚

GBKã€UTF-8éƒ½æ˜¯**ç¼–ç æ ¼å¼**ã€‚GBKå’ŒUTF-8éƒ½æ˜¯ç”¨æ¥åºåˆ—åŒ–æˆ–å­˜å‚¨Unicodeç¼–ç çš„æ•°æ®çš„ï¼Œä½†æ˜¯åˆ†åˆ«æ˜¯2ç§ä¸åŒçš„æ ¼å¼ã€‚é™¤äº†æ ¼å¼ä¸ä¸€æ ·ä¹‹å¤–ï¼Œä»–ä»¬æ‰€**å…³å¿ƒçš„unicodeç¼–ç èŒƒå›´ä¹Ÿä¸ä¸€æ ·**ï¼ŒUTF-8è€ƒè™‘äº†å¾ˆå¤šç§ä¸åŒå›½å®¶çš„å­—ç¬¦ï¼Œæ¶µç›–æ•´ä¸ªUnicodeç è¡¨ï¼Œæ‰€ä»¥å…¶å­˜å‚¨ä¸€ä¸ªå­—ç¬¦çš„ç¼–ç çš„æ—¶å€™ï¼Œä½¿ç”¨çš„å­—èŠ‚é•¿åº¦ä¹Ÿä»1å­—èŠ‚åˆ°4å­—èŠ‚ä¸ç­‰ï¼›è€ŒGBKåªè€ƒè™‘ä¸­æ–‡(åœ¨Unicodeä¸­çš„ä¸€å°éƒ¨åˆ†å­—ç¬¦çš„ç¼–ç ï¼‰ï¼Œæ‰€ä»¥å®ƒç®—å¥½äº†åªè¦2ä¸ªå­—èŠ‚å°±èƒ½æ¶µç›–åˆ°ç»å¤§å¤šæ•°å¸¸ç”¨ä¸­æ–‡(2ä¸ªå­—èŠ‚èƒ½è¡¨ç¤º6wå¤šç§å­—ç¬¦)ï¼Œæ‰€ä»¥å®ƒå­˜å‚¨ä¸€ä¸ªå­—ç¬¦çš„æ—¶å€™ï¼Œæ‰€ç”¨çš„å­—èŠ‚é•¿åº¦æ˜¯å›ºå®šçš„ã€‚

## Javaä¸­çš„ç¼–ç 

é¦–å…ˆJavaçš„Stringä½¿ç”¨çš„ç¼–ç æ˜¯Unicodeï¼Œä½†æ˜¯å½“Stringå­˜åœ¨äºå†…å­˜ä¸­æ—¶(ä¹Ÿå°±æ˜¯å½“ç¨‹åºè¿è¡Œæ—¶ï¼Œä½ åœ¨ä»£ç ä¸­ç”¨Stringç±»å‹çš„å¼•ç”¨å¯¹å®ƒè¿›è¡Œæ“ä½œæ—¶ï¼Œä¹Ÿå°±æ˜¯Stringæ²¡æœ‰è¢«å­˜åœ¨æ–‡ä»¶ä¸­ä¸”ä¹Ÿæ²¡æœ‰åœ¨ç½‘ç»œä¸­ä¼ è¾“(åºåˆ—åŒ–)æ—¶)ï¼Œæ˜¯â€œåªæœ‰ç¼–ç è€Œæ²¡æœ‰ç¼–ç æ ¼å¼çš„â€ï¼Œæ‰€ä»¥Javaç¨‹åºä¸­çš„ä»»ä½•Stringå¯¹è±¡ï¼Œè¯´å®ƒæ˜¯GBKè¿˜æ˜¯UTF-8éƒ½æ˜¯é”™çš„ã€‚GBKå’ŒUTF-8æ˜¯ç¼–ç æ ¼å¼è€Œä¸æ˜¯ç¼–ç ï¼ŒStringåœ¨å†…å­˜ä¸­ä¸éœ€è¦â€œç¼–ç æ ¼å¼â€(è®°ä½**ç¼–ç æ ¼å¼æ˜¯åœ¨å­˜æ–‡ä»¶æˆ–åºåˆ—åŒ–çš„æ—¶å€™ä½¿ç”¨çš„**), å®ƒåªæ˜¯ä¸€ä¸ªUnicodeçš„å­—ç¬¦ä¸²è€Œå·²ã€‚

æ‰€ä»¥Javaé‡Œé¢Stringæ˜¯ä¸å¸¦ç¼–ç æ ¼å¼çš„ï¼Œè€Œ`String.toByteArray(String charsetName)`å¾—åˆ°çš„`byteArray`æ˜¯å¸¦ç¼–ç æ ¼å¼çš„ï¼Œæ ¼å¼å°±æ˜¯ä½ ä¼ å…¥çš„`charsetName`ï¼Œæˆ‘ä»¬ä¸å¦¨æŠŠ`toByteArray`çš„è¿™ä¸ªè¿‡ç¨‹å«åš==ç¼–ç ==ï¼›å¦å¤–ï¼Œ`new String(byte bytes[], String charsetName)`æ˜¯æŠŠä¸€ä¸ªbyteæ•°ç»„(å¸¦ç¼–ç æ ¼å¼)ä»¥charsetNameæŒ‡å®šçš„ç¼–ç æ ¼å¼ç¿»è¯‘ä¸ºä¸€ä¸ªä¸å¸¦ç¼–ç æ ¼å¼çš„Stringå¯¹è±¡ï¼Œæˆ‘ä»¬ä¸å¦¨æŠŠè¿™ä¸ªè¿‡ç¨‹å«==è§£ç ==ã€‚

>`String(byte[] bytes)`é€šè¿‡ä½¿ç”¨å¹³å°çš„é»˜è®¤å­—ç¬¦é›†è§£ç æŒ‡å®šçš„ byte æ•°ç»„ï¼Œæ„é€ ä¸€ä¸ªæ–°çš„ Stringã€‚
> `String(byte[] bytes, Charset charset)`é€šè¿‡ä½¿ç”¨æŒ‡å®šçš„ charset è§£ç æŒ‡å®šçš„ byte æ•°ç»„ï¼Œæ„é€ ä¸€ä¸ªæ–°çš„ Stringã€‚
> 
> `byte[] getBytes()`ä½¿ç”¨å¹³å°çš„é»˜è®¤å­—ç¬¦é›†å°†æ­¤ String ç¼–ç ä¸º byte åºåˆ—ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åˆ°ä¸€ä¸ªæ–°çš„ byteæ•°ç»„ä¸­ã€‚
> `byte[] getBytes(Charset charset)`ä½¿ç”¨ç»™å®šçš„ charset å°†æ­¤ String ç¼–ç åˆ° byte åºåˆ—ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åˆ°æ–°çš„ byte æ•°ç»„ã€‚

```java
public class Test {
    public static void main(String[] args) throws UnsupportedEncodingException {
        String str1;
        String str2;
        byte[] bytes;

        str1 = "ä½ å¥½";
        bytes = str1.getBytes("UTF-8"); // ç”¨UTF-8ç¼–ç åºåˆ—åŒ–åˆ°å­—èŠ‚æ•°ç»„ä¸­
        str2 = new String(bytes, "UTF-8"); // ä½¿ç”¨UTF-8æ–¹å¼è§£ç 
        System.out.println(str2 + "123");

        bytes = str1.getBytes("GBK");
        str2 = new String(bytes, "GBK");
        System.out.println(str2 + "123");

        bytes = str1.getBytes("UTF-8");
        str2 = new String(bytes, "GBK");
        System.out.println(str2 + "123"); // UTF-8ç¼–ç ï¼ŒGBKè§£ç 

        str1 = "æµ£çŠ²ã‚½"; // è¿™æ˜¯"ä½ å¥½"çš„GBKç¼–ç çš„å­—ç¬¦ä¸²
        str2 = new String(str1.getBytes("GBK"), "UTF-8");
        System.out.println(str2 + "123");
    }
}

// è¾“å‡ºï¼š
// ä½ å¥½123
// ä½ å¥½123
// æµ£çŠ²ã‚½123
// ä½ å¥½123
```

## å‚è€ƒèµ„æ–™

[javaä¸­GBKç¼–ç æ ¼å¼è½¬æˆUTF8ï¼Œç”¨ä¸€æ®µæ–¹æ³•å®ç°æ€ä¹ˆåšï¼Ÿ - çŸ¥ä¹ (zhihu.com)](https://www.zhihu.com/question/20361462)